function math_getSpheresCollisionBOOL(t,e){var n=t.x-e.x,o=t.y-e.y;return Math.sqrt(n*n+o*o)<=t.r+e.r}function math_deg2Rad(t){return t*UTL_PID180}function math_rad2Deg(t){return t*UTL_180DPI}function math_dotproduct2D(t,e){return t.x*e.x+t.y*e.y}function math_normalize2D(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return 0==e&&(e=1),t.x/=e,t.y/=e,t}function math_closestPointOnLine(t,e,n){var o,r,a;o.x=n.x-t.x,o.y=n.y-t.y,r.x=e.x-t.x,r.y=e.y-t.y,r=math_normalize2D(r);var i=Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)),l=math_dotproduct2D(r,o);return l<=0?t:l>=i?e:(a.x=t.x+r.x*l,a.y=t.y+r.y*l,a)}function math_buildRGB(t,e,n){return n|e<<8|t<<16}function math_splitRGB(t){var e;return e.b=t%256,e.g=(-16711936&t)/256,e.r=(16711680&t)/65536,e}function math_randRange(t,e){return Math.floor(Math.random()*(e-t+1))+t}function math_getDirMC2D(t,e){var n;n.x=e.x-t.x,n.y=e.y-t.y;var o=Math.sqrt(n.x*n.x+n.y*n.y);return 0==o&&(o=1),n.x/=o,n.y/=o,n}function math_angleBTWlines2D(t,e,n){var o,r;return o.x=e.x-t.x,o.y=e.y-t.y,r.x=n.x-t.x,r.y=n.y-t.y,math_angleBTWvectors2D(o,r)}function math_angleBTWvectors2D(t,e){var n=t.x*e.x+t.y*e.y,o=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.sqrt(e.x*e.x+e.y*e.y),a=o*r,i=Math.acos(n/a);return isNaN(i)?0:i}function math_crossProduct2D(t,e){var n;return n.x=1*t.y-1*e.y,n.y=1*e.x-1*t.x,n}function math_randRange(t,e){return Math.floor(Math.random()*(e-t+1))+t}function math_clamp(t,e,n,o,r){var a=1/(e-t)*(r-t);return a>1?o:a<0?n:n+(o-n)*a}function math_quantomize(t){for(var e,n=t.length,o=0,r=0,a=0;a<t.length;a++)o=Math.floor(Math.random()*n),r=Math.floor(Math.random()*n),e=t[o],t[o]=t[r],t[r]=e}function math_rotatePoint(t,e){var n;return n.x=t.x*Math.cos(e)-t.y*Math.sin(e),n.y=t.y*Math.cos(e)+t.x*Math.sin(e),n}function math_getGauss(){return aGAUSS[math_randRange(0,14)]}function utl_isModernBrowser(){return"querySelector"in document&&"localStorage"in window&&"addEventListener"in window}function setup_formfield(t){t.focus(function(){var t=$(this).data("def"),e=$(this).val();""!==e&&e!==t||$(this).val(""),$(this).removeClass("error-red")}),t.blur(function(){var t=$(this).data("def"),e=$(this).val();""!==e&&e!==t||$(this).val(t)}),t.val(t.data("def"))}function utl_clientWindowSize(){return[window.innerWidth||document.documentElement.clientWidth,window.innerHeight||document.documentElement.clientHeight]}function utl_getScrollTop(){var t=0;return"number"==typeof window.pageYOffset?t=window.pageYOffset:document.body&&(document.body.scrollLeft||document.body.scrollTop)?t=document.body.scrollTop:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)&&(t=document.documentElement.scrollTop),t}function utl_urlParam(t){var e=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(window.location.href);return null===e?null:e[1]||0}function utl_email(t){if(t.indexOf(" ")>0)return!1;var e=t.split("@");if(2!==e.length||0===e[0].length||0===e[1].length)return!1;var n=e[1].split(".");if(n.length<2)return!1;for(var o=0;o<n.length;o++)if(n[o].length<1)return!1;var r=n[n.length-1];return!(r.length<2||r.length>3)}function utl_delegate(t,e){return function(n){return e.call(t,n)}}function utl_buildStringWithis(t,e,n){for(var o="",r=t.split(n),a=r.length,i=0;i<a;i++){var l=e[i];null===l&&(l=""),o+=r[i]+" "+l+" "}return o}function utl_loadPage(t,e){$.post(t,function(t){$(e).css("opacity","0"),$(e).html(t),$(e).animate({opacity:"1"},300)})}function utl_msToTime(t){var e=parseInt(t%1e3/100),n=parseInt(t/1e3%60),o=parseInt(t/6e4%60);return[parseInt(t/36e5%24),o,n,e]}function utl_msToTimeSZ(t){var e=parseInt(t%1e3/100),n=parseInt(t/1e3%60),o=parseInt(t/6e4%60),r=parseInt(t/36e5%24);return r=r<10?"0"+r:r,o=o<10?"0"+o:o,n=n<10?"0"+n:n,r+":"+o+":"+n+"."+e}function utl_callPlayer(t,e,n){function o(t,e){var n=t?window.addEventListener:window.removeEventListener;n?n("message",e,!1):(t?window.attachEvent:window.detachEvent)("onmessage",e)}window.jQuery&&t instanceof jQuery&&(t=t.get(0).id);var r=document.getElementById(t);r&&"IFRAME"!=r.tagName.toUpperCase()&&(r=r.getElementsByTagName("iframe")[0]),callPlayer.queue||(callPlayer.queue={});var a=callPlayer.queue[t],i="complete"==document.readyState;if(i&&!r)window.console&&console.log("callPlayer: Frame not found; id="+t),a&&clearInterval(a.poller);else if("listening"===e)r&&r.contentWindow&&(e='{"event":"listening","id":'+JSON.stringify(""+t)+"}",r.contentWindow.postMessage(e,"*"));else if(i&&(!r||r.contentWindow&&(!a||a.ready))&&(a&&a.ready||"function"!=typeof e)){if(r&&r.contentWindow){if(e.call)return e();r.contentWindow.postMessage(JSON.stringify({event:"command",func:e,args:n||[],id:t}),"*")}}else a||(a=callPlayer.queue[t]=[]),a.push([e,n]),"poller"in a||(a.poller=setInterval(function(){callPlayer(t,"listening")},250),o(1,function e(n){if(!r){if(!(r=document.getElementById(t)))return;if("IFRAME"!=r.tagName.toUpperCase()&&!(r=r.getElementsByTagName("iframe")[0]))return}if(n.source===r.contentWindow)for(clearInterval(a.poller),a.ready=!0,o(0,e);tmp=a.shift();)callPlayer(t,tmp[0],tmp[1])}))}function utl_buildSVG(t){var e=$(t),n=e.attr("id"),o=e.attr("class"),r=e.attr("src");$.get(r,function(t){var r=jQuery(t).find("svg");void 0!==n&&(r=r.attr("id",n)),void 0!==o&&(r=r.attr("class",o)),r=r.removeAttr("xmlns:a"),!r.attr("viewBox")&&r.attr("height")&&r.attr("width")&&r.attr("viewBox","0 0 "+r.attr("height")+" "+r.attr("width")),e.replaceWith(r)},"xml")}function utl_create_submitter(t){$(t.form).on("submit",function(e){e.preventDefault();var n,o=document.getElementById(t.file),r=new FormData(this),a=0,i=o.files.length;for(a;a<i;a++)n=o.files[a],r.append("file[]",n);r.append("json",!0),!0===t.md5name&&r.append("use_md5_names",!0),t.target&&r.append("target_path",t.target),$.ajax({url:t.path,type:"POST",data:r,contentType:!1,cache:!1,processData:!1,context:t,resetForm:!0,beforeSend:function(t){this.loadstart&&this.loadstart()},xhr:function(){var e=$.ajaxSettings.xhr();return e.upload.subcontext=t,e.upload&&(e.upload.addEventListener("progress",function(t){if(t.lengthComputable){var e=t.total,n=t.loaded,o=100*n/e;this.subcontext.progress&&this.subcontext.progress(o)}},!1),e.upload.addEventListener("loadstart",function(){},!1),e.upload.addEventListener("load",function(){},!1),e.upload.addEventListener("timeout",function(){},!1),e.upload.addEventListener("loadend",function(t){},!1),e.upload.addEventListener("error",function(){},!1),e.upload.addEventListener("abort",function(){},!1)),e},error:function(t){},success:function(t){},complete:function(t){}}).done(function(t){this.complete&&this.complete(t)}).fail(function(t){this.error&&this.error(t)}).always(function(t){})})}function utl_download_asset(t){var e=APP_ASSETS+t,n=szUrlBase+"/?param="+e;window.open(n,"name","height=400,width=750").focus()}function utl_clear_keywords(t){return t=t.replace(","," "),t=t.replace(/[^A-Za-z0-9āĀēĒūŪīĪšŠģĢķĶļĻžŽčČņŅ .]/g,""),t=t.replace(/\s+/g," "),t=t.replace(/^\s+|\s+$/g,"")}function utl_quick_html(t,e){var n=document.getElementById(t);n.innerHTML=e;for(var o=$("."+t).children("script"),r=o.length,a=0;a<r;a++){var i=document.createElement("script");i.text=$(o[a]).text(),$(o[a]).remove(),n.appendChild(i)}}function utl_get_scrollbar_width(){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",document.body.appendChild(t);t.offsetWidth;t.style.overflowY="scroll";var e=document.createElement("div");e.style.width="100%",t.appendChild(e);var n=100-e.offsetWidth;return t.removeChild(e),document.body.removeChild(t),n}function utl_buildStringWithis(t,e,n){for(var o="",r=t.split(n),a=r.length,i=0;i<a;i++){var l=e[i];null===l&&(l=""),o+=r[i]+" "+l+" "}return o}function utl_passstrength(t,e){var n=function(t,e){for(var n="",o=0;o<e.length;o++){for(var r=!0,a=0;a<t&&a+o+t<e.length;a++)r=r&&e.charAt(a+o)==e.charAt(a+o+t);a<t&&(r=!1),r?(o+=t-1,r=!1):n+=e.charAt(o)}return n},o=new Object;return o.score=0,o.value=UTL_PASS_MEDIUM,t.length<4&&(o.value=UTL_PASS_SHORT),t.toLowerCase()==e.toLowerCase()&&(o.value=UTL_PASS_EQNAME),o.score+=4*t.length,o.score+=1*(n(1,t).length-t.length),o.score+=1*(n(2,t).length-t.length),o.score+=1*(n(3,t).length-t.length),o.score+=1*(n(4,t).length-t.length),t.match(/(.*[0-9].*[0-9].*[0-9])/)&&(o.score+=5),t.match(/(.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~])/)&&(o.score+=5),t.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&(o.score+=10),t.match(/([a-zA-Z])/)&&t.match(/([0-9])/)&&(o.score+=15),t.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&t.match(/([0-9])/)&&(o.score+=15),t.match(/([!,@,#,$,%,^,&,*,?,_,~])/)&&t.match(/([a-zA-Z])/)&&(o.score+=15),(t.match(/^\w+$/)||t.match(/^\d+$/))&&(o.score-=10),o.score<0&&(o.score=0),o.score>100&&(o.score=100),o.score<34&&(o.value=UTL_PASS_WEAK),o.score>68&&(o.value=UTL_PASS_STRONG),o}function utl_number_format(t,e,n,o){t*=1;for(var r=t.toFixed(e||0).toString().split("."),a=[],i=r[0].length;i>0;i-=3)a.unshift(r[0].substring(Math.max(0,i-3),i));return r[0]=a.join(o||","),r.join(n||".")}function utl_debounce(t,e,n){var o;return function(){var r=this,a=arguments,i=function(){o=null,n||t.apply(r,a)},l=n&&!o;clearTimeout(o),o=setTimeout(i,e),l&&t.apply(r,a)}}function utl_latlngToPoint(t,e){var n=t.getProjection().fromLatLngToPoint(t.getBounds().getNorthEast()),o=t.getProjection().fromLatLngToPoint(t.getBounds().getSouthWest()),r=Math.pow(2,t.getZoom()),a=t.getProjection().fromLatLngToPoint(e);return new google.maps.Point((a.x-o.x)*r,(a.y-n.y)*r)}function utl_getYouTubeIdFromURL(t){var e=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,n=t.match(e);return!(!n||11!=n[2].length)&&n[2]}function utl_parseURL(t){var e=new Object;if(e.res=/^(?:([a-z0-9_\-\.]+):\/\/)*(?:([a-z0-9_\-\.]+)(?:\:)*([a-z0-9_\-\.]+)*\@)*([a-z0-9][a-z0-9_\-\.]+)(?:\:([\d]+))*(?:\/([^?#]*))*(?:\?([^?#]*))*(?:\#([^?#]*))*/gi.exec(t),e.data.scheme=e.res[1]||!1,e.data.user=e.res[2]||!1,e.data.pass=e.res[3]||!1,e.data.host=e.res[4]||!1,e.data.port=e.res[5]||!1,e.data.path=e.res[6]||!1,e.data.query=e.res[7]||!1,e.data.fragment=e.res[8]||!1,e.data.query){e.parts=e.data.query.split("&");for(var n=0;n<e.parts.length;n++)param=e.parts[n].split("="),e.data.params[param[0]]=decodeURIComponent(param[1])}return delete e.res,delete e.parts,e}var cookie={set:function(t,e,n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var r="expires="+o.toGMTString();document.cookie=t+"="+e+"; "+r},setExp:function(t,e,n){var o=new Date(n),r="expires="+o.toGMTString();document.cookie=t+"="+e+"; "+r},get:function(t){for(var e=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){var r=n[o].trim();if(0===r.indexOf(e))return r.substring(e.length,r.length)}return""}};$(document).ready(function(){app.preinit(),$(window).on("resize",function(){app.resize(utl_clientWindowSize())}),$(window).resize(),$(window).on("scroll",function(){app.scroll(utl_getScrollTop())}),$(window).scroll(),app.init()}),$(window).on("load",function(){document.addEventListener("visibilitychange",function(){document.hidden?app.visibility("hidden"):app.visibility("visible"),"unloaded"===document.visibilityState&&app.visibility("unloaded")}),app.unimportant_init()});var app={visibility:function(t){console.log("app:visibility",t)},resize:function(t){console.log("app:resize:",t[0])},scroll:function(t){console.log("app:scroll:",t)},unimportant_init:function(){console.log("app:unimportant_init"),url_path.init(),""==common.hash||common.is_ie9orless||"pc"!=common.device||$("html, body").animate({scrollTop:$("#"+common.hash).offset().top},1e3,"swing",function(){})},preinit:function(){console.log("app:preinit")},init:function(){console.log("app:init")}},UTL_PID180=Math.PI/180,UTL_180DPI=180/Math.PI,aGAUSS=new Array;aGAUSS[0]={x:.285561,y:.188437},aGAUSS[1]={x:.360176,y:-.065688},aGAUSS[2]={x:-.111751,y:.275019},aGAUSS[3]={x:-.055918,y:-.215197},aGAUSS[4]={x:-.080231,y:-.470965},aGAUSS[5]={x:.138721,y:.409168},aGAUSS[6]={x:.38412,y:.4585},aGAUSS[7]={x:-.454968,y:.134088},aGAUSS[8]={x:.179271,y:-.331196},aGAUSS[9]={x:-.307049,y:-.364927},aGAUSS[10]={x:.105354,y:-.010099},aGAUSS[11]={x:-.15418,y:.021794},aGAUSS[12]={x:-.370135,y:-.116425},aGAUSS[13]={x:.451636,y:-.300013},aGAUSS[14]={x:-.37061,y:.387504};var url_path={lock_hash:!1,init:function(){common.history_api?window.onpopstate&&(window.onpopstate=function(t){}):window.onhashchange=function(){url_path.lock_hash&&(url_path.lock_hash=!1)}},set_path:function(t){if(common.history_api){var e=common.url_base+common.lang+"/"+t,n={name:"projectname",href:e};window.history.pushState(n,"projectname",e)}else{var e=t;url_path.lock_hash=!0,window.location.hash=e}}},utl_validator={isEmail:function(t){return this.test(t,"^[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&'*+\\/0-9=?A-Z^_`a-z{|}~]+.[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+$")},isAbsUrl:function(t){return this.test(t,"^(news|telnet|nttp|file|http|ftp|https)://[-A-Za-z0-9\\.]+\\/?.*$")},isSize:function(t){return this.test(t,"^[0-9.]+(%|in|cm|mm|em|ex|pt|pc|px)?$")},isId:function(t){return this.test(t,"^[A-Za-z_]([A-Za-z0-9_])*$")},isEmpty:function(t){var e,n;if("SELECT"==t.nodeName&&t.selectedIndex<1)return!0;if("checkbox"==t.type&&!t.checked)return!0;if("radio"==t.type){for(n=0,e=t.form.elements;n<e.length;n++)if("radio"==e[n].type&&e[n].name==t.name&&e[n].checked)return!1;return!0}return new RegExp("^\\s*$").test(1==t.nodeType?t.value:t)},isNumber:function(t,e){return!(isNaN(1==t.nodeType?t.value:t)||e&&this.test(t,"^-?[0-9]*\\.[0-9]*$"))}},UTL_PASS_SHORT=0,UTL_PASS_EQNAME=1,UTL_PASS_WEAK=2,UTL_PASS_MEDIUM=3,UTL_PASS_STRONG=4;